<template>
  <!-- ====================================================================================
       主容器
       ====================================================================================
       - min-h-screen：最小高度为屏幕高度
       - bg-white：白色背景
       - flex items-center justify-center：弹性布局，水平和垂直居中
  -->
  <div class="min-h-screen bg-white flex items-center justify-center">
    <!-- ====================================================================================
         网格容器
         ====================================================================================
         - :grid="true"：启用网格布局
    -->
    <GridContainer :grid="true">
      <!-- ====================================================================================
           内容区域
           ====================================================================================
           - col-span-12：占满整行
           - lg:col-span-8：桌面端占 8/12 宽度
           - lg:offset-2：桌面端向右偏移 2 列（实现居中）
           - text-center：文本居中
           - py-32：上下内边距（8rem）
      -->
      <div class="col-span-12 lg:col-span-8 lg:offset-2 text-center py-32">
        <!-- ====================================================================================
             404 标题
             ====================================================================================
             - TypographyHeader：排版标题组件
             - :level="1"：标题级别 1（H1）
             - size="display"：显示级别字体（超大字体）
             - class：样式类
             - !text-[12rem]：强制移动端字体大小 12rem
             - md:!text-[16rem]：强制平板字体大小 16rem
             - lg:!text-[20rem]：强制桌面字体大小 20rem
             - !leading-none：强制无行高（紧凑）
             - !tracking-tighter：强制超紧凑字间距
        -->
        <TypographyHeader
          :level="1"
          size="display"
          class="mb-8 !text-[12rem] md:!text-[16rem] lg:!text-[20rem] !leading-none tracking-tighter"
        >
          404
        </TypographyHeader>

        <!-- ====================================================================================
             错误信息
             ====================================================================================
             - TypographyHeader：排版标题组件
             - :level="2"：标题级别 2（H2）
             - size="h2"：字体大小 H2
             - class：样式类
             - !tracking-tight：强制紧凑字间距
             - mb-6：下边距（1.5rem）
             - {{ $t('error.title') }}：错误标题（多语言翻译）
        -->
        <TypographyHeader :level="2" size="h2" class="mb-6 !tracking-tight">
          {{ $t('error.title') }}
        </TypographyHeader>

        <!-- ====================================================================================
             错误详情
             ====================================================================================
             - p：段落标签
             - text-swiss-secondary：次要文本颜色
             - text-lg：大字体（移动端）
             - md:text-xl：特大字体（平板以上）
             - mb-12：下边距（3rem）
             - max-w-2xl：最大宽度 42rem
             - mx-auto：水平居中
             - leading-relaxed：宽松行高
             - {{ $t('error.message') }}：错误信息（多语言翻译）
        -->
        <p class="text-swiss-secondary text-lg md:text-xl mb-12 max-w-2xl mx-auto leading-relaxed">
          {{ $t('error.message') }}
        </p>

        <!-- ====================================================================================
             操作按钮
             ====================================================================================
             - flex：弹性布局
             - flex-col：移动端垂直排列
             - sm:flex-row：平板以上水平排列
             - gap-6：间距 1.5rem
             - justify-center：水平居中
             - items-center：垂直居中
        -->
        <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
          <!-- 返回首页按钮 -->
          <!-- @click="navigateTo(localePath('/'))"：点击时跳转到首页 -->
          <!-- variant="primary"：主要按钮样式 -->
          <!-- size="lg"：大尺寸 -->
          <!-- {{ $t('error.backHome') }}：按钮文本（多语言翻译） -->
          <SwissButton variant="primary" size="lg" @click="navigateTo(localePath('/'))">
            {{ $t('error.backHome') }}
          </SwissButton>

          <!-- 返回上页按钮 -->
          <!-- @click="goBack"：点击时返回上一页 -->
          <!-- variant="ghost"：幽灵按钮样式 -->
          <!-- size="lg"：大尺寸 -->
          <!-- {{ $t('error.goBack') }}：按钮文本（多语言翻译） -->
          <SwissButton variant="ghost" size="lg" @click="goBack">
            {{ $t('error.goBack') }}
          </SwissButton>
        </div>

        <!-- ====================================================================================
             装饰性元素
             ====================================================================================
             - mt-24：上边距（6rem）
             - pt-12：上内边距（3rem）
             - border-t border-gray-100：顶部边框
        -->
        <div class="mt-24 pt-12 border-t border-gray-100">
          <!-- 技术信息 -->
          <!-- inline-flex：内联弹性布局 -->
          <!-- items-center：垂直居中 -->
          <!-- gap-3：间距 0.75rem -->
          <!-- text-swiss-text/40：40% 透明度的瑞士设计文本色 -->
          <!-- text-xs：极小字体 -->
          <!-- font-mono：等宽字体 -->
          <div class="inline-flex items-center gap-3 text-swiss-text/40 text-xs font-mono">
            <!-- 错误代码 -->
            <span>ERROR_CODE: 404</span>

            <!-- 分隔点（小圆点） -->
            <!-- w-1 h-1：宽度 1px，高度 1px -->
            <!-- bg-swiss-text/40：40% 透明度的瑞士设计文本色 -->
            <!-- rounded-full：完全圆形 -->
            <span class="w-1 h-1 bg-swiss-text/40 rounded-full"></span>

            <!-- 错误类型 -->
            <span>PAGE_NOT_FOUND</span>
          </div>
        </div>
      </div>
    </GridContainer>
  </div>
</template>
<script setup lang="ts">
/**
 * ====================================================================================
 * 404 错误页面（404 Page Not Found）
 * ====================================================================================
 *
 * 文件作用：
 * 此文件是网站的 404 错误页面，当用户访问不存在的路径时显示。
 * 页面包含错误标题、错误信息、操作按钮和装饰性元素。
 *
 * 实现手段：
 * 1. Vue 3 Composition API（<script setup>）
 * 2. 瑞士国际主义设计风格（TypographyHeader、SwissButton）
 * 3. 响应式设计：适配桌面、平板、手机
 * 4. 居中布局：错误信息居中显示
 *
 * 核心功能：
 * 1. 错误标题：显示 "404" 大标题
 * 2. 错误信息：显示用户友好的错误提示
 * 3. 操作按钮：
 *    - "返回首页"（Back Home）：跳转到首页
 *    - "返回上页"（Go Back）：返回上一页
 * 4. 装饰元素：显示错误代码（ERROR_CODE: 404）
 *
 * 页面结构：
 * 1. 主容器：居中布局
 *    - 标题：404（超大字体）
 *    - 错误信息：用户友好的提示文本
 *    - 操作按钮：两个按钮（返回首页、返回上页）
 *    - 装饰元素：错误代码和技术信息
 *
 * 导航逻辑：
 * - "返回首页"按钮：始终跳转到首页（/）
 * - "返回上页"按钮：
 *   - 如果有历史记录（window.history.length > 1），则返回上一页
 *   - 如果没有历史记录，则跳转到首页
 *
 * 国际化支持：
 * - $t('error.title')：错误标题（多语言）
 * - $t('error.message')：错误信息（多语言）
 * - $t('error.backHome')："返回首页"按钮文本
 * - $t('error.goBack')："返回上页"按钮文本
 *
 * 设计特点：
 * - 超大标题：12rem（移动端）、16rem（平板）、20rem（桌面）
 * - 简洁布局：居中显示，避免干扰
 * - 瑞士风格：使用 TypographyHeader 和 SwissButton 组件
 * - 装饰元素：显示错误代码和技术信息，增加专业感
 *
 * 访问触发条件：
 * - 用户访问不存在的路径（例如：/nonexistent-page）
 * - API 返回 404 状态码
 * - 资源不存在（图片、文件等）
 *
 * SEO 优化：
 * - title：404 - Page Not Found
 * - 可以在 useHead 中添加 meta 标签、description 等
 *
 * 技术栈：
 * - 框架：Nuxt 3（Vue 3）
 * - 样式：Tailwind CSS
 * - 国际化：@nuxtjs/i18n
 * - 路由：Nuxt Router
 *
 * 组件使用：
 * - GridContainer：瑞士设计网格布局
 * - TypographyHeader：排版标题组件
 * - SwissButton：瑞士设计按钮组件
 *
 * 响应式设计：
 * - 标题字体大小：12rem（移动端）、16rem（平板）、20rem（桌面）
 * - 按钮布局：移动端垂直排列，平板以上水平排列
 * - 内边距：py-32（8rem）
 *
 * ====================================================================================
 */

// ====================================================================================
// 国际化
// ====================================================================================
// useI18n()：获取 i18n 实例
// - t：翻译函数，用于获取多语言文本
const { t } = useI18n()

// ====================================================================================
// 路由
// ====================================================================================
// useLocalePath()：根据当前语言生成路径的组合式函数
const localePath = useLocalePath()

// useRouter()：获取路由实例的组合式函数
const router = useRouter()

// ====================================================================================
// 返回上页
// ====================================================================================
/**
 * goBack() - 返回上页
 *
 * 功能：
 * 返回上一页，如果没有历史记录，则跳转到首页。
 *
 * 逻辑：
 * 1. 检查 window.history.length（浏览器历史记录数量）
 *    - length > 1：有历史记录，使用 router.back() 返回
 *    - length <= 1：无历史记录，跳转到首页
 *
 * 为什么检查历史记录？
 * - 如果用户直接访问 404 页面（例如：输入错误的 URL），没有历史记录
 * - 此时 router.back() 会导致页面无响应
 * - 因此需要检查并跳转到首页
 *
 * 调用时机：
 * - 用户点击"返回上页"按钮时
 *
 * 注意事项：
 * - window.history 是浏览器 API，包含会话历史记录
 * - router.back() 是 Vue Router 提供的返回上一页方法
 * - navigateTo() 是 Nuxt 提供的导航方法，支持多语言
 */
const goBack = () => {
  // 检查是否有历史记录
  if (window.history.length > 1) {
    // 如果有历史记录，返回上一页
    router.back()
  } else {
    // 如果没有历史记录，跳转到首页
    navigateTo(localePath('/'))
  }
}

// ====================================================================================
// SEO：页面标题
// =================================================================================<arg_value>useHead({
  // title：页面标题
  title: '404 - Page Not Found',
})
</script>
